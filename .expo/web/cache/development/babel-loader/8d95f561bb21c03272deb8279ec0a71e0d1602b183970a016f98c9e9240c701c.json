{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar UserContext = createContext(undefined);\nexport var UserProvider = function UserProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUserState = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setIsLoading = _useState4[1];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var saved = yield AsyncStorage.getItem('userProfile');\n      if (saved) setUserState(JSON.parse(saved));\n      setIsLoading(false);\n    })();\n  }, []);\n  var setUser = function () {\n    var _ref3 = _asyncToGenerator(function* (profile) {\n      yield AsyncStorage.setItem('userProfile', JSON.stringify(profile));\n      setUserState(profile);\n    });\n    return function setUser(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsx(UserContext.Provider, {\n    value: {\n      user: user,\n      setUser: setUser,\n      isLoading: isLoading\n    },\n    children: children\n  });\n};\nexport var useUser = function useUser() {\n  var context = useContext(UserContext);\n  if (!context) throw new Error('useUser must be used within a UserProvider');\n  return context;\n};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","AsyncStorage","jsx","_jsx","UserContext","undefined","UserProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUserState","_useState3","_useState4","isLoading","setIsLoading","_asyncToGenerator","saved","getItem","JSON","parse","setUser","_ref3","profile","setItem","stringify","_x","apply","arguments","Provider","value","useUser","context","Error"],"sources":["/workspaces/ai-english-tutor-v2/src/contexts/UserContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport interface UserProfile {\n  name: string;\n  email: string;\n  language: string;\n  progress: number;\n  lessonsCompleted: number;\n}\n\ninterface UserContextType {\n  user: UserProfile | null;\n  setUser: (profile: UserProfile) => void;\n  isLoading: boolean;\n}\n\nconst UserContext = createContext<UserContextType | undefined>(undefined);\n\nexport const UserProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [user, setUserState] = useState<UserProfile | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const saved = await AsyncStorage.getItem('userProfile');\n      if (saved) setUserState(JSON.parse(saved));\n      setIsLoading(false);\n    })();\n  }, []);\n\n  const setUser = async (profile: UserProfile) => {\n    await AsyncStorage.setItem('userProfile', JSON.stringify(profile));\n    setUserState(profile);\n  };\n\n  return (\n    <UserContext.Provider value={{ user, setUser, isLoading }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport const useUser = () => {\n  const context = useContext(UserContext);\n  if (!context) throw new Error('useUser must be used within a UserProvider');\n  return context;\n};"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,OAAOC,YAAY,MAAM,2CAA2C;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAgBrE,IAAMC,WAAW,GAAGP,aAAa,CAA8BQ,SAAS,CAAC;AAEzE,OAAO,IAAMC,YAAqD,GAAG,SAAxDA,YAAqDA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EAC9E,IAAAC,SAAA,GAA6BV,QAAQ,CAAqB,IAAI,CAAC;IAAAW,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAxDG,IAAI,GAAAF,UAAA;IAAEG,YAAY,GAAAH,UAAA;EACzB,IAAAI,UAAA,GAAkCf,QAAQ,CAAC,IAAI,CAAC;IAAAgB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAzCE,SAAS,GAAAD,UAAA;IAAEE,YAAY,GAAAF,UAAA;EAE9Bf,SAAS,CAAC,YAAM;IACdkB,iBAAA,CAAC,aAAY;MACX,IAAMC,KAAK,SAASlB,YAAY,CAACmB,OAAO,CAAC,aAAa,CAAC;MACvD,IAAID,KAAK,EAAEN,YAAY,CAACQ,IAAI,CAACC,KAAK,CAACH,KAAK,CAAC,CAAC;MAC1CF,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,EAAE,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMM,OAAO;IAAA,IAAAC,KAAA,GAAAN,iBAAA,CAAG,WAAOO,OAAoB,EAAK;MAC9C,MAAMxB,YAAY,CAACyB,OAAO,CAAC,aAAa,EAAEL,IAAI,CAACM,SAAS,CAACF,OAAO,CAAC,CAAC;MAClEZ,YAAY,CAACY,OAAO,CAAC;IACvB,CAAC;IAAA,gBAHKF,OAAOA,CAAAK,EAAA;MAAA,OAAAJ,KAAA,CAAAK,KAAA,OAAAC,SAAA;IAAA;EAAA,GAGZ;EAED,OACE3B,IAAA,CAACC,WAAW,CAAC2B,QAAQ;IAACC,KAAK,EAAE;MAAEpB,IAAI,EAAJA,IAAI;MAAEW,OAAO,EAAPA,OAAO;MAAEP,SAAS,EAATA;IAAU,CAAE;IAAAR,QAAA,EACvDA;EAAQ,CACW,CAAC;AAE3B,CAAC;AAED,OAAO,IAAMyB,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;EAC3B,IAAMC,OAAO,GAAGpC,UAAU,CAACM,WAAW,CAAC;EACvC,IAAI,CAAC8B,OAAO,EAAE,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;EAC3E,OAAOD,OAAO;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}